(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{1397:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(55242),s=a(13065);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},25802:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>n,_:()=>o});var r=a(88111),s=a(55271);let l=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,s.useState)([]),[o,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("auvolar_cart"),t=localStorage.getItem("auvolar_cart_id");if(e)try{n(JSON.parse(e))}catch(e){console.error("Failed to load cart:",e)}t&&i(t)},[]),(0,s.useEffect)(()=>{localStorage.setItem("auvolar_cart",JSON.stringify(a))},[a]),(0,s.useEffect)(()=>{o&&localStorage.setItem("auvolar_cart_id",o)},[o]);let u=a.reduce((e,t)=>e+t.quantity,0),m=a.reduce((e,t)=>e+t.price*t.quantity,0),h=async e=>{d(!0);try{let t=a.findIndex(t=>t.productId===e.productId&&t.variantId===e.variantId);if(t>=0){let r=[...a];r[t].quantity+=e.quantity,n(r)}else{let t={id:"".concat(e.productId,"-").concat(e.variantId||"default","-").concat(Date.now()),...e};n([...a,t])}await p([...a,{id:"".concat(e.productId,"-").concat(e.variantId||"default","-").concat(Date.now()),...e}])}catch(e){console.error("Failed to add to cart:",e)}finally{d(!1)}},x=async(e,t)=>{d(!0);try{if(t<=0)return void await f(e);let r=a.map(a=>a.id===e?{...a,quantity:t}:a);n(r),await p(r)}finally{d(!1)}},f=async e=>{d(!0);try{let t=a.filter(t=>t.id!==e);n(t),await p(t)}finally{d(!1)}},p=async e=>{try{let t=await fetch("/api/cart/smart-sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.map(e=>({product_id:e.productId,variant_id:e.variantId,quantity:e.quantity}))})}),a=await t.json();a.cartId&&i(a.cartId)}catch(e){console.error("Failed to sync cart with BigCommerce:",e)}},g=async()=>{if(!o&&0===a.length)return null;d(!0);try{o||await p(a);let e=await fetch("/api/cart/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cartId:o})}),t=await e.json();if(t.checkoutUrl)return t.checkoutUrl;return null}catch(e){return console.error("Failed to create checkout:",e),null}finally{d(!1)}};return(0,r.jsx)(l.Provider,{value:{items:a,cartId:o,itemCount:u,subtotal:m,loading:c,addToCart:h,updateQuantity:x,removeItem:f,clearCart:()=>{n([]),i(null),localStorage.removeItem("auvolar_cart"),localStorage.removeItem("auvolar_cart_id")},checkout:g},children:t})}function o(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},49469:()=>{},52321:(e,t,a)=>{"use strict";a.d(t,{ChatWidget:()=>u});var r=a(88111),s=a(55271),l=a(88221),n=a(93356),o=a(24692),i=a(60921),c=a(56192),d=a(78337);function u(){let[e,t]=(0,s.useState)(!1),[a,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)([]),[x,f]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null),[v,w]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),k=(0,s.useRef)(null),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e;null==(e=k.current)||e.scrollIntoView({behavior:"smooth"})},[m]),(0,s.useEffect)(()=>{if(e&&!a){var t;null==(t=S.current)||t.focus()}},[e,a]),(0,s.useEffect)(()=>{e&&0===m.length&&h([{role:"assistant",content:"Hey! \uD83D\uDC4B I'm Alex from Auvolar. Looking for commercial LED lighting? I can help you find the right products and get you the best pricing. What kind of project are you working on?",timestamp:new Date}])},[e,m.length]),(0,s.useEffect)(()=>{let t=setTimeout(()=>{e||N(!0)},5e3);return()=>clearTimeout(t)},[e]);let C=async(e,t)=>{try{await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"chat-lead",...e,conversation:t.map(e=>({role:e.role,content:e.content,time:e.timestamp.toISOString()})),sessionId:b})}),w(!0)}catch(e){console.error("Failed to save lead:",e)}},I=async(e,t)=>{try{await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"chat-escalation",reason:e,conversation:t.map(e=>({role:e.role,content:e.content,time:e.timestamp.toISOString()})),sessionId:b})})}catch(e){console.error("Failed to notify human:",e)}},D=async()=>{if(!x.trim()||p)return;let e=x.trim();f("");let t=[...m,{role:"user",content:e,timestamp:new Date}];h(t),g(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t.map(e=>({role:e.role,content:e.content})),sessionId:b,visitorInfo:{page:window.location.pathname}})}),a=await e.json();if(a.error)throw Error(a.error);let r={role:"assistant",content:a.reply,timestamp:new Date},s=[...t,r];if(h(s),a.sessionId&&y(a.sessionId),a.leadCollected&&a.leadData){let e=a.leadData.split(",").map(e=>e.trim()),t={};e.forEach(e=>{let[a,...r]=e.split(":"),s=r.join(":").trim();if(a&&s){let e=a.trim().toLowerCase();"name"===e?t.name=s:"email"===e?t.email=s:"phone"===e?t.phone=s:"company"===e?t.company=s:"products"===e?t.products=s:"quantity"===e?t.quantity=s:"notes"===e&&(t.notes=s)}}),C(t,s)}a.escalate&&a.escalateReason&&I(a.escalateReason,s)}catch(e){console.error("Chat error:",e),h(e=>[...e,{role:"assistant",content:"I apologize, I'm having a technical issue. Please email us at sales@auvolar.com or call (626) 342-8856 and we'll help you right away!",timestamp:new Date}])}finally{g(!1)}};return e?a?(0,r.jsxs)("button",{onClick:()=>u(!1),className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 rounded-full bg-brand px-4 py-3 shadow-lg hover:bg-brand-dark transition-all",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 text-black"}),(0,r.jsx)("span",{className:"font-medium text-black",children:"Continue Chat"}),m.length>1&&(0,r.jsx)("span",{className:"bg-black text-white text-xs px-2 py-0.5 rounded-full",children:m.length})]}):(0,r.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col w-[380px] h-[520px] max-h-[80vh] bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-brand px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-black/10",children:(0,r.jsx)(n.A,{className:"h-5 w-5 text-black"})}),(0,r.jsx)("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-brand rounded-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-black",children:"Alex from Auvolar"}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Sales Specialist • Online"})]})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("button",{onClick:()=>u(!0),className:"p-2 hover:bg-black/10 rounded-lg transition-colors","aria-label":"Minimize",children:(0,r.jsx)(o.A,{className:"h-4 w-4 text-black"})}),(0,r.jsx)("button",{onClick:()=>t(!1),className:"p-2 hover:bg-black/10 rounded-lg transition-colors","aria-label":"Close",children:(0,r.jsx)(i.A,{className:"h-4 w-4 text-black"})})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[m.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-end gap-2 ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,r.jsx)("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-brand flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"h-4 w-4 text-black"})}),(0,r.jsxs)("div",{className:"max-w-[75%] rounded-2xl px-4 py-2 ".concat("user"===e.role?"bg-brand text-black rounded-br-md":"bg-white text-gray-800 shadow-sm border border-gray-100 rounded-bl-md"),children:[(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:e.content}),(0,r.jsx)("p",{className:"text-[10px] mt-1 ".concat("user"===e.role?"text-black/50":"text-gray-400"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),"user"===e.role&&(0,r.jsx)("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gray-200 flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"h-4 w-4 text-gray-600"})})]},t)),p&&(0,r.jsxs)("div",{className:"flex items-end gap-2 justify-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-brand flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"h-4 w-4 text-black"})}),(0,r.jsx)("div",{className:"bg-white text-gray-800 shadow-sm border border-gray-100 rounded-2xl rounded-bl-md px-4 py-3",children:(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),(0,r.jsx)("div",{ref:k})]}),m.length<=1&&(0,r.jsxs)("div",{className:"px-4 pb-2 bg-gray-50 flex gap-2 flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>f("I need warehouse lighting"),className:"text-xs bg-white border border-gray-200 rounded-full px-3 py-1 hover:bg-gray-50",children:"\uD83C\uDFED Warehouse"}),(0,r.jsx)("button",{onClick:()=>f("I need parking lot lights"),className:"text-xs bg-white border border-gray-200 rounded-full px-3 py-1 hover:bg-gray-50",children:"\uD83C\uDD7F️ Parking"}),(0,r.jsx)("button",{onClick:()=>f("I need office lighting"),className:"text-xs bg-white border border-gray-200 rounded-full px-3 py-1 hover:bg-gray-50",children:"\uD83C\uDFE2 Office"}),(0,r.jsx)("button",{onClick:()=>f("Get a quote"),className:"text-xs bg-white border border-gray-200 rounded-full px-3 py-1 hover:bg-gray-50",children:"\uD83D\uDCB0 Get Quote"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 p-3 bg-white",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{ref:S,type:"text",value:x,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Type your message...",className:"flex-1 rounded-xl border border-gray-300 px-4 py-2.5 text-sm focus:border-brand focus:outline-none focus:ring-1 focus:ring-brand"}),(0,r.jsx)("button",{onClick:D,disabled:!x.trim()||p,className:"flex h-10 w-10 items-center justify-center rounded-xl bg-brand text-black hover:bg-brand-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,r.jsx)("span",{className:"text-[10px] text-gray-400",children:"Powered by AI"}),(0,r.jsx)("span",{className:"text-gray-300",children:"•"}),(0,r.jsx)("a",{href:"mailto:sales@auvolar.com",className:"text-[10px] text-gray-400 hover:text-gray-600",children:"sales@auvolar.com"}),(0,r.jsx)("span",{className:"text-gray-300",children:"•"}),(0,r.jsx)("a",{href:"tel:+16263428856",className:"text-[10px] text-gray-400 hover:text-gray-600",children:"(626) 342-8856"})]})]})]}):(0,r.jsxs)("div",{className:"fixed bottom-6 right-6 z-50",children:[j&&(0,r.jsx)("div",{className:"absolute bottom-16 right-0 mb-2 animate-bounce",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-3 max-w-[200px] border border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-800",children:"\uD83D\uDC4B Need help finding the right lights?"}),(0,r.jsx)("div",{className:"absolute bottom-0 right-4 transform translate-y-1/2 rotate-45 w-3 h-3 bg-white border-r border-b border-gray-200"})]})}),(0,r.jsxs)("button",{onClick:()=>{t(!0),N(!1)},className:"flex h-14 w-14 items-center justify-center rounded-full bg-brand shadow-lg hover:bg-brand-dark transition-all hover:scale-105","aria-label":"Open chat",children:[(0,r.jsx)(l.A,{className:"h-6 w-6 text-black"}),(0,r.jsxs)("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-green-500"})]})]})]})}},70299:(e,t,a)=>{"use strict";a.d(t,{HubSpotIdentify:()=>l});var r=a(76611),s=a(55271);function l(){var e,t;let{data:a}=(0,r.useSession)();return(0,s.useEffect)(()=>{var e;if(null==a||null==(e=a.user)?void 0:e.email){let e=window._hsq=window._hsq||[];e.push(["identify",{email:a.user.email,...a.user.name?{firstname:a.user.name}:{}}]),e.push(["trackPageView"])}},[null==a||null==(e=a.user)?void 0:e.email,null==a||null==(t=a.user)?void 0:t.name]),null}},83012:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,49469,23)),Promise.resolve().then(a.bind(a,52321)),Promise.resolve().then(a.bind(a,70299)),Promise.resolve().then(a.bind(a,91826)),Promise.resolve().then(a.bind(a,84534)),Promise.resolve().then(a.bind(a,25802)),Promise.resolve().then(a.t.bind(a,25598,23)),Promise.resolve().then(a.t.bind(a,57111,23))},84181:(e,t,a)=>{"use strict";a.d(t,{d:()=>n});var r=a(55271);let s=[],l={toasts:[]};function n(){let[e,t]=r.useState(l);return r.useEffect(()=>(s.push(t),()=>{s=s.filter(e=>e!==t)}),[]),{...e,toast:e=>(function(e){let t=Math.random().toString(36).slice(2);return l={toasts:[{id:t,...e},...l.toasts].slice(0,5)},s.forEach(e=>{e(l)}),setTimeout(()=>{l={toasts:l.toasts.filter(e=>e.id!==t)},s.forEach(e=>{e(l)})},5e3),t})(e),dismiss:e=>{l={toasts:e?l.toasts.filter(t=>t.id!==e):[]},s.forEach(e=>{e(l)})}}}},84534:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>f});var r=a(88111),s=a(55271),l=a(68040),n=a(60921),o=a(1397),i=a(84181);let c=l.Kq,d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.LM,{ref:t,className:(0,o.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...s})});d.displayName=l.LM.displayName;let u=s.forwardRef((e,t)=>{let{className:a,variant:s="default",...n}=e;return(0,r.jsx)(l.bL,{ref:t,className:(0,o.cn)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full","default"===s&&"border-gray-200 bg-white text-gray-950","destructive"===s&&"border-red-500 bg-red-500 text-white",a),...n})});u.displayName=l.bL.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.bm,{ref:t,className:(0,o.cn)("absolute right-2 top-2 rounded-md p-1 text-gray-950/50 opacity-0 transition-opacity hover:text-gray-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",a),"toast-close":"",...s,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});m.displayName=l.bm.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-sm font-semibold",a),...s})});h.displayName=l.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm opacity-90",a),...s})});function f(){let{toasts:e}=(0,i.d)();return(0,r.jsxs)(c,{children:[e.map(e=>(0,r.jsxs)(u,{variant:e.variant,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[e.title&&(0,r.jsx)(h,{children:e.title}),e.description&&(0,r.jsx)(x,{children:e.description})]}),(0,r.jsx)(m,{})]},e.id)),(0,r.jsx)(d,{})]})}x.displayName=l.VY.displayName},91826:(e,t,a)=>{"use strict";a.d(t,{SessionProvider:()=>l});var r=a(88111),s=a(76611);function l(e){let{children:t}=e;return(0,r.jsx)(s.SessionProvider,{children:t})}}},e=>{e.O(0,[5420,5526,16,2463,3256,814,9743,7358],()=>e(e.s=83012)),_N_E=e.O()}]);