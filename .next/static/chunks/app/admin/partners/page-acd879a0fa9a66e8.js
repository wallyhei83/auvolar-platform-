(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5624],{7340:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(55271);let r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:m,...x}=e;return(0,a.createElement)("svg",{ref:t,...l,width:i,height:i,stroke:s,strokeWidth:d?24*Number(n)/Number(i):n,className:r("lucide",c),...x},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),n=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{className:n,...d}=s;return(0,a.createElement)(i,{ref:l,iconNode:t,className:r("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...d})});return s.displayName="".concat(e),s}},13619:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},20157:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},23302:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},25349:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},27161:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},37088:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(88111),r=s(55271),l=s(84181),i=s(93447),n=s(20157),d=s(13619),c=s(23302),o=s(25349),m=s(68932),x=s(74148),h=s(27161);let p=(0,s(7340).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function g(){let[e,t]=(0,r.useState)([]),[s,g]=(0,r.useState)(!0),[u,y]=(0,r.useState)("ALL"),{toast:f}=(0,l.d)(),N=async()=>{let e=await fetch("/api/admin/partners");e.ok&&t(await e.json()),g(!1)};(0,r.useEffect)(()=>{N()},[]);let j=async(e,t)=>{(await fetch("/api/admin/partners/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(f({title:"Partner updated"}),N()):f({title:"Error updating partner",variant:"destructive"})},v={PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",SUSPENDED:"bg-gray-100 text-gray-800"},b={REP:"Sales Rep / Engineer",INSTALLER:"Contractor / Electrician",DISTRIBUTOR:"Distributor / Supplier"},A="ALL"===u?e:e.filter(e=>e.status===u),k={total:e.length,pending:e.filter(e=>"PENDING"===e.status).length,approved:e.filter(e=>"APPROVED"===e.status).length,totalCommission:e.reduce((e,t)=>e+t.totalCommission,0)};return s?(0,a.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,a.jsx)(i.A,{className:"h-8 w-8 animate-spin text-gray-400"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Partner Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Review applications, manage partners, track commissions"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"})," Total Partners"]}),(0,a.jsx)("div",{className:"mt-1 text-2xl font-bold",children:k.total})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-yellow-600",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"})," Pending Review"]}),(0,a.jsx)("div",{className:"mt-1 text-2xl font-bold text-yellow-600",children:k.pending})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"})," Approved"]}),(0,a.jsx)("div",{className:"mt-1 text-2xl font-bold text-green-600",children:k.approved})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"})," Total Commission"]}),(0,a.jsxs)("div",{className:"mt-1 text-2xl font-bold",children:["$",k.totalCommission.toFixed(2)]})]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:["ALL","PENDING","APPROVED","REJECTED","SUSPENDED"].map(t=>(0,a.jsx)("button",{onClick:()=>y(t),className:"rounded-lg px-3 py-1.5 text-sm font-medium ".concat(u===t?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"ALL"===t?"All (".concat(e.length,")"):"".concat(t," (").concat(e.filter(e=>e.status===t).length,")")},t))}),(0,a.jsx)("div",{className:"space-y-4",children:0===A.length?(0,a.jsx)("div",{className:"rounded-lg border bg-white p-8 text-center text-gray-500",children:"No partners found"}):A.map(e=>(0,a.jsx)("div",{className:"rounded-lg border bg-white p-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:e.companyName}),(0,a.jsx)("span",{className:"rounded-full px-2.5 py-0.5 text-xs font-medium ".concat(v[e.status]||"bg-gray-100"),children:e.status}),(0,a.jsx)("span",{className:"rounded-full bg-blue-50 px-2.5 py-0.5 text-xs font-medium text-blue-700",children:b[e.partnerType]||e.partnerType})]}),e.user&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3.5 w-3.5"})," ",e.user.name]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"h-3.5 w-3.5"})," ",e.user.email]}),e.user.phone&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"h-3.5 w-3.5"})," ",e.user.phone]})]}),(0,a.jsxs)("div",{className:"mt-2 flex gap-4 text-xs text-gray-400",children:[(0,a.jsxs)("span",{children:["Referral: ",(0,a.jsx)("code",{className:"rounded bg-gray-100 px-1.5 py-0.5 font-mono",children:e.referralCode})]}),(0,a.jsxs)("span",{children:["Applied: ",new Date(e.createdAt).toLocaleDateString()]}),e.approvedAt&&(0,a.jsxs)("span",{children:["Approved: ",new Date(e.approvedAt).toLocaleDateString()]}),(0,a.jsxs)("span",{children:["Commission: ",e.commissionRate?"".concat(e.commissionRate,"%"):"Not set"]}),(0,a.jsxs)("span",{children:["Orders: ",e.totalOrders," ($",e.totalCommission.toFixed(2),")"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["PENDING"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>j(e.id,{status:"APPROVED",commissionRate:5}),className:"flex items-center gap-1 rounded-lg bg-green-100 px-3 py-1.5 text-sm font-medium text-green-700 hover:bg-green-200",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"})," Approve"]}),(0,a.jsxs)("button",{onClick:()=>j(e.id,{status:"REJECTED"}),className:"flex items-center gap-1 rounded-lg bg-red-100 px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-200",children:[(0,a.jsx)(p,{className:"h-4 w-4"})," Reject"]})]}),"APPROVED"===e.status&&(0,a.jsx)("button",{onClick:()=>j(e.id,{status:"SUSPENDED"}),className:"rounded-lg bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 hover:bg-gray-200",children:"Suspend"}),("REJECTED"===e.status||"SUSPENDED"===e.status)&&(0,a.jsx)("button",{onClick:()=>j(e.id,{status:"APPROVED"}),className:"rounded-lg bg-green-100 px-3 py-1.5 text-sm font-medium text-green-700 hover:bg-green-200",children:"Re-approve"})]})]})},e.id))})]})}},68932:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},70418:(e,t,s)=>{Promise.resolve().then(s.bind(s,37088))},74148:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},84181:(e,t,s)=>{"use strict";s.d(t,{d:()=>i});var a=s(55271);let r=[],l={toasts:[]};function i(){let[e,t]=a.useState(l);return a.useEffect(()=>(r.push(t),()=>{r=r.filter(e=>e!==t)}),[]),{...e,toast:e=>(function(e){let t=Math.random().toString(36).slice(2);return l={toasts:[{id:t,...e},...l.toasts].slice(0,5)},r.forEach(e=>{e(l)}),setTimeout(()=>{l={toasts:l.toasts.filter(e=>e.id!==t)},r.forEach(e=>{e(l)})},5e3),t})(e),dismiss:e=>{l={toasts:e?l.toasts.filter(t=>t.id!==e):[]},r.forEach(e=>{e(l)})}}}},93447:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7340).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{e.O(0,[814,9743,7358],()=>e(e.s=70418)),_N_E=e.O()}]);