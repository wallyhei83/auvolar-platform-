(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9770],{1397:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(55242),r=t(13065);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},4736:(e,s,t)=>{"use strict";var a=t(11504);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},12326:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var a=t(88111),r=t(55271),l=t(34216),d=t(73916),i=t(1397);let n=(0,d.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:d,asChild:c=!1,...o}=e,u=c?l.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(n({variant:r,size:d,className:t})),ref:s,...o})});c.displayName="Button"},18330:(e,s,t)=>{Promise.resolve().then(t.bind(t,98538))},23302:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7340).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},25460:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var a=t(88111),r=t(55271),l=t(74974),d=t(73916),i=t(1397);let n=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,i.cn)(n(),t),...r})});c.displayName=l.b.displayName},29772:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>d,aR:()=>i,wL:()=>u});var a=t(88111),r=t(55271),l=t(1397);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});d.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});n.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},56503:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7340).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},59914:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>x,gC:()=>h,l6:()=>o,yv:()=>u});var a=t(88111),r=t(55271),l=t(76764),d=t(34285),i=t(32368),n=t(67729),c=t(1397);let o=l.bL;l.YJ;let u=l.WT,m=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=l.PP.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});f.displayName=l.wn.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,position:d="popper",...i}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:d,...i,children:[(0,a.jsx)(p,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(f,{})]})})});h.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let x=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...d,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});x.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.wv.displayName},60921:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7340).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},67022:(e,s,t)=>{"use strict";t.d(s,{p:()=>d});var a=t(88111),r=t(55271),l=t(1397);let d=r.forwardRef((e,s)=>{let{className:t,type:r,...d}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...d})});d.displayName="Input"},84181:(e,s,t)=>{"use strict";t.d(s,{d:()=>d});var a=t(55271);let r=[],l={toasts:[]};function d(){let[e,s]=a.useState(l);return a.useEffect(()=>(r.push(s),()=>{r=r.filter(e=>e!==s)}),[]),{...e,toast:e=>(function(e){let s=Math.random().toString(36).slice(2);return l={toasts:[{id:s,...e},...l.toasts].slice(0,5)},r.forEach(e=>{e(l)}),setTimeout(()=>{l={toasts:l.toasts.filter(e=>e.id!==s)},r.forEach(e=>{e(l)})},5e3),s})(e),dismiss:e=>{l={toasts:e?l.toasts.filter(s=>s.id!==e):[]},r.forEach(e=>{e(l)})}}}},98538:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(88111),r=t(55271),l=t(55935),d=t.n(l),i=t(4736),n=t(67022),c=t(12326),o=t(25460),u=t(59914),m=t(29772),p=t(84181);let f=(0,t(7340).A)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var h=t(23302),x=t(93447),g=t(56503),j=t(60921);function y(){let e=(0,i.useRouter)(),{toast:s}=(0,p.d)(),t=(0,r.useRef)(null),[l,y]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[N,w]=(0,r.useState)([]),[C,k]=(0,r.useState)(!1),R=async()=>{if(!l||!b)return void s({title:"Please enter Product ID and SKU",variant:"destructive"});if(0===N.length)return void s({title:"Please add files",variant:"destructive"});k(!0);for(let e=0;e<N.length;e++){w(s=>s.map((s,t)=>t===e?{...s,status:"uploading"}:s));try{let s=new FormData;s.append("file",N[e].file),s.append("bcProductId",l),s.append("sku",b),s.append("title",N[e].title),s.append("docType",N[e].docType),(await fetch("/api/documents/upload",{method:"POST",body:s})).ok?w(s=>s.map((s,t)=>t===e?{...s,status:"done"}:s)):w(s=>s.map((s,t)=>t===e?{...s,status:"error"}:s))}catch(s){w(s=>s.map((s,t)=>t===e?{...s,status:"error"}:s))}}k(!1);let t=N.filter(e=>"done"===e.status).length;s({title:"Uploaded ".concat(t,"/").concat(N.length," files")}),t===N.length&&setTimeout(()=>e.push("/admin/products"),1500)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Upload Product Documents"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Upload multiple files — auto-classified by filename"})]}),(0,a.jsx)(d(),{href:"/admin/products",children:(0,a.jsx)(c.$,{variant:"outline",children:"Back to List"})})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Product Information"}),(0,a.jsx)(m.BT,{children:"All files below will be linked to this product"})]}),(0,a.jsxs)(m.Wu,{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{children:"BigCommerce Product ID *"}),(0,a.jsx)(n.p,{value:l,onChange:e=>y(e.target.value),placeholder:"e.g. 12345"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{children:"SKU *"}),(0,a.jsx)(n.p,{value:b,onChange:e=>v(e.target.value),placeholder:"e.g. AV-HB150W-50K"})]})]})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Files"}),(0,a.jsx)(m.BT,{children:"Drag & drop or click to add files. Type is auto-detected from filename."})]}),(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50/50 transition-colors",onClick:()=>{var e;return null==(e=t.current)?void 0:e.click()},children:[(0,a.jsx)(f,{className:"h-10 w-10 mx-auto text-gray-400 mb-3"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Click to select files or drag & drop"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, IES, images — multiple files allowed"}),(0,a.jsx)("input",{ref:t,type:"file",multiple:!0,className:"hidden",onChange:e=>{if(!e.target.files)return;let s=Array.from(e.target.files).map(e=>({file:e,docType:function(e){let s=e.toLowerCase();return s.includes("spec")||s.includes("cut")||s.includes("datasheet")||s.includes("data-sheet")?"CUT_SHEET":s.includes(".ies")||s.includes("ies")||s.includes("photometric")?"IES":s.includes("install")||s.includes("guide")||s.includes("instruction")||s.includes("manual")?"INSTALL_GUIDE":s.includes("dimension")||s.includes("drawing")||s.includes("dim")?"DIMENSIONS":s.includes("dlc")||s.includes("cert")||s.includes("certificate")?"DLC_CERT":s.includes("warranty")||s.includes("warr")?"WARRANTY":"OTHER"}(e.name),title:e.name.replace(/\.[^.]+$/,"").replace(/[-_]/g," "),status:"pending"}));w(e=>[...e,...s]),t.current&&(t.current.value="")},accept:".pdf,.ies,.jpg,.jpeg,.png,.doc,.docx"})]}),N.length>0&&(0,a.jsx)("div",{className:"space-y-3",children:N.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border ".concat("done"===e.status?"bg-green-50 border-green-200":"error"===e.status?"bg-red-50 border-red-200":"uploading"===e.status?"bg-blue-50 border-blue-200":"bg-white border-gray-200"),children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:"done"===e.status?(0,a.jsx)(h.A,{className:"h-5 w-5 text-green-600"}):"uploading"===e.status?(0,a.jsx)(x.A,{className:"h-5 w-5 animate-spin text-blue-600"}):(0,a.jsx)(g.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(n.p,{value:e.title,onChange:e=>{var t;return t=e.target.value,void w(e=>e.map((e,a)=>a===s?{...e,title:t}:e))},className:"text-sm h-8",disabled:"pending"!==e.status}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1 truncate",children:[e.file.name," (",(e.file.size/1024/1024).toFixed(2)," MB)"]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 w-44",children:(0,a.jsxs)(u.l6,{value:e.docType,onValueChange:e=>{w(t=>t.map((t,a)=>a===s?{...t,docType:e}:t))},disabled:"pending"!==e.status,children:[(0,a.jsx)(u.bq,{className:"h-8 text-sm",children:(0,a.jsx)(u.yv,{})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"CUT_SHEET",children:"Spec/Cut Sheet"}),(0,a.jsx)(u.eb,{value:"IES",children:"IES File"}),(0,a.jsx)(u.eb,{value:"INSTALL_GUIDE",children:"Installation Guide"}),(0,a.jsx)(u.eb,{value:"DIMENSIONS",children:"Dimensions"}),(0,a.jsx)(u.eb,{value:"DLC_CERT",children:"DLC Certificate"}),(0,a.jsx)(u.eb,{value:"WARRANTY",children:"Warranty"}),(0,a.jsx)(u.eb,{value:"OTHER",children:"Other"})]})]})}),"pending"===e.status&&(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{w(e=>e.filter((e,t)=>t!==s))},className:"flex-shrink-0",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]},s))}),N.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[N.length," file(s) ready"]}),(0,a.jsx)(c.$,{onClick:R,disabled:C,children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"})," Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{className:"mr-2 h-4 w-4"})," Upload All"]})})]})]})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{className:"text-sm",children:"Auto-Classification Rules"})}),(0,a.jsx)(m.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Spec Sheet:"})," spec, cut, datasheet"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"IES File:"})," .ies, photometric"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Install Guide:"})," install, guide, manual"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Warranty:"})," warranty, warr"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"DLC Cert:"})," dlc, cert"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Dimensions:"})," dimension, drawing"]})]})})]})]})}}},e=>{e.O(0,[5935,16,2463,3820,1130,814,9743,7358],()=>e(e.s=18330)),_N_E=e.O()}]);