(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7122],{57864:(e,s,a)=>{Promise.resolve().then(a.bind(a,75313))},68932:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(7340).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},74148:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(7340).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},75313:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(88111),i=a(55271),l=a(12326),r=a(67022),d=a(1130),n=a(25460),c=a(29772),h=a(84181),o=a(68932),x=a(74148),u=a(93447),j=a(48786),m=a(21422),p=a(76611);function v(){var e;let{data:s}=(0,p.useSession)(),{toast:a}=(0,h.d)();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage system configuration"})]}),(0,t.jsx)(g,{}),(0,t.jsx)(N,{}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-5 w-5"})," Company Information"]}),(0,t.jsx)(c.BT,{children:"Platform branding and contact details"})]}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Company Name"}),(0,t.jsx)(r.p,{defaultValue:"Auvolar",disabled:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Support Email"}),(0,t.jsx)(r.p,{defaultValue:"support@auvolar.com",disabled:!0})]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Contact your SUPER_ADMIN to modify company settings."})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"System Information"})}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Platform"}),(0,t.jsx)("p",{className:"font-medium",children:"Auvolar Portal"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Framework"}),(0,t.jsx)("p",{className:"font-medium",children:"Next.js 15"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Database"}),(0,t.jsx)("p",{className:"font-medium",children:"Neon PostgreSQL"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Your Role"}),(0,t.jsx)("p",{className:"font-medium",children:(null==s||null==(e=s.user)?void 0:e.role)||"â€”"})]})]})})]})]})}function g(){var e;let{data:s}=(0,p.useSession)(),{toast:a}=(0,h.d)(),[d,o]=(0,i.useState)(""),[m,v]=(0,i.useState)(""),[g,N]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(null==s?void 0:s.user)&&o(s.user.name||"")},[s]);let f=async()=>{N(!0);let e=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,phone:m})});N(!1),e.ok?a({title:"Profile updated"}):a({title:"Failed to update",variant:"destructive"})};return(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-5 w-5"})," Profile"]}),(0,t.jsx)(c.BT,{children:"Your account information"})]}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Email"}),(0,t.jsx)(r.p,{value:(null==s||null==(e=s.user)?void 0:e.email)||"",disabled:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Name"}),(0,t.jsx)(r.p,{value:d,onChange:e=>o(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Phone"}),(0,t.jsx)(r.p,{value:m,onChange:e=>v(e.target.value),placeholder:"(555) 123-4567"})]})]}),(0,t.jsxs)(l.$,{onClick:f,disabled:g,children:[g?(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Save Profile"]})]})]})}function N(){let{toast:e}=(0,h.d)(),[s,a]=(0,i.useState)(""),[r,o]=(0,i.useState)(""),[x,j]=(0,i.useState)(""),[p,v]=(0,i.useState)(!1),g=async()=>{if(r!==x)return void e({title:"Passwords do not match",variant:"destructive"});if(r.length<8)return void e({title:"Password must be at least 8 characters",variant:"destructive"});v(!0);let t=await fetch("/api/user/password",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:s,newPassword:r})});v(!1),t.ok?(e({title:"Password changed"}),a(""),o(""),j("")):e({title:(await t.json()).message||"Failed",variant:"destructive"})};return(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-5 w-5"})," Change Password"]})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Current Password"}),(0,t.jsx)(d.y,{value:s,onChange:e=>a(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"New Password"}),(0,t.jsx)(d.y,{value:r,onChange:e=>o(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Confirm"}),(0,t.jsx)(d.y,{value:x,onChange:e=>j(e.target.value)})]})]}),(0,t.jsxs)(l.$,{onClick:g,disabled:p,children:[p?(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Change Password"]})]})]})}}},e=>{e.O(0,[5526,16,9138,814,9743,7358],()=>e(e.s=57864)),_N_E=e.O()}]);